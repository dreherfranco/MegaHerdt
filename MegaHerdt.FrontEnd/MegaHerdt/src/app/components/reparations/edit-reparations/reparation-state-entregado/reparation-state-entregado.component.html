
<div class="table-responsive p-1" *ngIf="reparations.length > 0">
    <table matSort (matSortChange)="sortData($event)" class="table"  >
        <thead>
            <tr>
                <th mat-sort-header="ticket" scope="col">N° Ticket</th>
                <th mat-sort-header="employeeEmail" scope="col">Email empleado</th>
                <th mat-sort-header="clientEmail" scope="col">Cliente</th>
                <th mat-sort-header="date" scope="col">Fecha</th>
                <th mat-sort-header="clientDescription" scope="col">Descripción del cliente</th>
                <th mat-sort-header="diagnostic" scope="col">Diagnostico</th>
                <th mat-sort-header="total" scope="col">Total</th>
                <!-- <th mat-sort-header="facturada" scope="col">Facturada</th> -->
                <th scope="col">Detalle</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let reparation of sortedData 
            | filter: searchText
            | paginate: 
            {
                itemsPerPage: this.paginate.recordsPerPage, 
                currentPage:this.paginate.page
            }; 
            let i = index">
                <th>
                    <span class="data-user">{{ reparation.id }}</span>
                </th>
                <th>
                    <span class="data-user">{{ reparation.employee.email.substring(0, 25) }}</span>
                    <span *ngIf="reparation.employee.email.length > 25">...</span>
                </th>
                <th>
                    <span class="data-user">{{ reparation.client.userName.substring(0, 25) }}</span>
                    <span *ngIf="reparation.client.userName.length > 25">...</span>
                </th>      
                <th>
                    <span class="data-user">{{reparation.date | date: 'dd/MM/yyyy'}} </span>
                </th>
                <th>
                    <span *ngIf="reparation.clientDescription === '' " class="text-secondary">No existe descripción</span>
                    <span class="data-user">{{ reparation.clientDescription.substring(0, 25) }}</span>
                    <span *ngIf="reparation.clientDescription.length > 25">...</span>
                </th>
                <th>
                    <span *ngIf="reparation.diagnostic === '' " class="text-secondary">No se hizo ningún diagnostico</span>
                    <span class="data-user">{{ reparation.diagnostic.substring(0, 25) }} </span>
                    <span *ngIf="reparation.diagnostic.length > 25">...</span>
                </th>
                <th>
                    <span class="data-user">${{ (reparation.amount + reparation.totalArticleAmount).toFixed(2)  }}</span>
                </th> 
                <!-- <th>
                    <span class="data-user" *ngIf="reparation.facturada">Si</span>
                    <span class="data-user" *ngIf="!reparation.facturada">No</span>
                </th>  -->
                <th>
                    <button class="btn link-custom" (click)="openShowReparationDetail(reparation)"><i class="bi bi-eye-fill text-primary"></i></button>
                </th>
                <td>
                    <button class="btn btn-primary col-sm-12" title="Editar" (click)="openDialogUpdate(reparation)"> 
                        <i class="bi bi-pencil-square"></i>
                    </button>
                </td>  
            </tr>

        </tbody>

    </table>
    <pagination-controls class="text-center data-user" (pageChange)="this.paginate.page = $event"
        previousLabel="Anterior" nextLabel="Siguiente" *ngIf="sortedData.length > quantityPageRecords">
    </pagination-controls>
</div>
<p class="alert alert-warning m-2 w-50 mx-auto" *ngIf="reparations.length === 0"><i class="bi bi-exclamation-circle-fill"></i> No existen reparaciones en este estado</p>