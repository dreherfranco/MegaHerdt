<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MegaHerdt</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="./assets/images/megaherdt.jpg">
  <link rel="preconnect" href="https://fonts.gstatic.com">

    <script src="https://sdk.mercadopago.com/js/v2">
    </script>
</head>
<body class="mat-typography">
  <!--
  <div id="cardPaymentBrick_container"></div>
  -->
  <app-root></app-root>

<!--

  <script>

   setTimeout(function() {
    // window.Mercadopago.setPublishableKey("TEST-a14e30b8-57d4-45a9-9907-6e1f31a8cfe7");
     
     // EJECUTAR METODO DEL .TS 
    
     
     const backendURL = "https://localhost:7032"; // Reemplaza con la URL de tu backend
     const endpoint = "/api/PurchasePayments/confirm-payment-mp";
     
     const mp = new MercadoPago('TEST-a14e30b8-57d4-45a9-9907-6e1f31a8cfe7', {
       locale: 'es-AR'
     });
 
     const bricksBuilder = mp.bricks();
     const renderCardPaymentBrick = async (bricksBuilder) => {
       const settings = {
         initialization: {
           // PROBAR SACAR EL MONTO DINAMICAMENTE DEL TOTAL DEL CARRITO
           amount: 100, // monto a ser pago
           payer: {
             email: "",
           },
         },
         customization: {
           visual: {
             style: {
               theme: 'default', // | 'dark' | 'bootstrap' | 'flat'
             }
           },
           paymentMethods: {
             maxInstallments: 12,
           }
         },
         callbacks: {
           onReady: () => {
             // callback llamado cuando Brick esté listo
           },
           onSubmit: (cardFormData) => {
             
             //  callback llamado cuando el usuario haga clic en el botón enviar los datos
             //  ejemplo de envío de los datos recolectados por el Brick a su servidor
             return new Promise((resolve, reject) => {
               fetch(`${backendURL}${endpoint}`, {
                 method: "POST",
                 headers: {
                   "Content-Type": "application/json",
                 },
                 body: JSON.stringify(cardFormData)
               })
                 .then((response) => {
                   // recibir el resultado del pago
                   resolve();
                 })
                 .catch((error) => {
                   // tratar respuesta de error al intentar crear el pago
                   reject();
                 })
             });
           },
           onError: (error) => {
             // callback llamado para todos los casos de error de Brick
           },
         },
       };
       window.cardPaymentBrickController = await bricksBuilder.create('cardPayment', 'cardPaymentBrick_container', settings);
     };
     renderCardPaymentBrick(bricksBuilder);
   }, 8000); // Cambia el valor de 2000 por el retraso en milisegundos que desees

 </script>  -->
   </body>
</html>
